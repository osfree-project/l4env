#!/bin/bash

WRAPPER_INCLUDEDIR="${WRAPPER_INCLUDEDIR:=-I/usr/i386-linux-uclibc/include/}"
WRAPPER_LIBDIR="${WRAPPER_LIBDIR:=-L/usr/i386-linux-uclibc/lib/}"

WRAPPER_OPTIONS=""
WRAPPER_LIBS=" -L/usr/lib/gcc/i486-linux-gnu/4.0.2/ -lc -lgcc -Wl,--as-needed -lgcc_s -Wl,--no-as-needed"

WRAPPER_INCLIB="Y"
while [ -n "$1" ]
do
	WRAPPER_OPTIONS="$WRAPPER_OPTIONS $1"
	if [ "$1" == "-c" ]
	then
		WRAPPER_INCLIB="N"
	fi
	if [ "$1" == "-static" ]
	then
		WRAPPER_LIBS=" -L/usr/lib/gcc/i486-linux-gnu/4.0.2/ -lc -lgcc"
	fi
	shift
done
if [ "$WRAPPER_INCLIB" == "Y" ]
then
	WRAPPER_OPTIONS="$WRAPPER_OPTIONS -nodefaultlibs $WRAPPER_LIBDIR -luClibc++ $WRAPPER_LIBS"
fi

echo "g++ -fno-builtin -nostdinc++ -DGCC_HASCLASSVISIBILITY  $WRAPPER_INCLUDEDIR $WRAPPER_OPTIONS"
exec g++ -fno-builtin -nostdinc++ -DGCC_HASCLASSVISIBILITY  $WRAPPER_INCLUDEDIR $WRAPPER_OPTIONS
